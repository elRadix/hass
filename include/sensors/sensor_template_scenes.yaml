---
- platform: template
  sensors:
    easyplus:
      friendly_name: "Easyplus Master"
      entity_id: sensor.time, sensor.easyplus_boiler, sensor.easyplus_cleaning
      device_class: power
      value_template: >-
        {% if is_state('sensor.easyplus_boiler', 'on') %}
          on
        {% elif is_state('sensor.easyplus_kitchen', 'on') %}
          on
        {% elif is_state('sensor.easyplus_was.state', 'on') %}
          on
        {% else %}
          off
        {% endif %}


- platform: template 
  sensors:
    easyplus_boiler:
      friendly_name: "Boiler Master"
      entity_id: input_boolean.easyplus_boiler_shower, input_boolean.easyplus_boiler_heating
      device_class: power
      value_template: >-
        {% if is_state('input_boolean.easyplus_boiler_shower', 'on') %}
          on
        {% elif is_state('input_boolean.easyplus_boiler_heating', 'on') %}
          on
        {% else %}
          off
        {% endif %}
      icon_template: >-
        {% if is_state('input_boolean.easyplus_boiler_shower', 'on') %}
           mdi:shower-head
        {% elif is_state('input_boolean.easyplus_boiler_heating', 'on') %}
            mdi:fan
        {% else %}
            mdi:close-circle-outline
        {% endif %}


- platform: template
  sensors:
    easyplus_boiler_heating:
      friendly_name: "Heating Master"
      entity_id: input_boolean.easyplus_boiler_heating_1h_eetkamer,input_boolean.easyplus_boiler_heating_1h_floradix,input_boolean.easyplus_boiler_heating_1h_living,input_boolean.easyplus_boiler_heating_1h_sara,input_boolean.easyplus_boiler_heating_1h_yassin,input_boolean.easyplus_boiler_heating_2h_eetkamer,input_boolean.easyplus_boiler_heating_2h_floradix,input_boolean.easyplus_boiler_heating_2h_living,input_boolean.easyplus_boiler_heating_2h_sara,input_boolean.easyplus_boiler_heating_2h_yassin
      device_class: power
      value_template: >-
        {% if 'on' in states.input_boolean.easyplus_boiler_heating_1h_eetkamer.state %}
          on
        {% elif 'on' in states.input_boolean.easyplus_boiler_heating_1h_floradix.state %}
          on
        {% elif 'on' in states.input_boolean.easyplus_boiler_heating_1h_living.state %}
          on
        {% elif 'on' in states.input_boolean.easyplus_boiler_heating_1h_sara.state %}
          on
        {% elif 'on' in states.input_boolean.easyplus_boiler_heating_1h_yassin.state %}
          on
        {% elif 'on' in states.input_boolean.easyplus_boiler_heating_2h_eetkamer.state %}
          on
        {% elif 'on' in states.input_boolean.easyplus_boiler_heating_2h_floradix.state %}
          on
        {% elif 'on' in states.input_boolean.easyplus_boiler_heating_2h_living.state %}
          on
        {% elif 'on' in states.input_boolean.easyplus_boiler_heating_2h_sara.state %}
          on
        {% elif 'on' in states.input_boolean.easyplus_boiler_heating_2h_yassin.state %}
          on
        {% else %}
          off
        {% endif %}

- platform: template
  sensors:
    easyplus_was:
      friendly_name: "Was"
      entity_id: switch.stp_berging_droogkast,switch.stp_berging_wasmachine
      device_class: power
      value_template: >-
        {% if 'on' in states.switch.stp_berging_wasmachine.state %}
          on
        {% elif 'on' in states.switch.stp_berging_droogkast.state %}
          on
        {% else %}
          off
        {% endif %}
      icon_template: >-
        {% if 'on' in states.switch.stp_berging_wasmachine.state %}
           mdi:washing-machine
        {% elif 'on' in states.switch.stp_berging_droogkast.state %}
            mdi:tumble-dryer
        {% else %}
            mdi:close-circle-outline
        {% endif %}

- platform: template
  sensors:
    easyplus_kitchen:
      friendly_name: "Kitchen"
      entity_id: switch.stp_keuken_vaatwasser, switch.stp_keuken_commander
      device_class: power
      value_template: >-
         {% if 'on' in states.switch.stp_keuken_vaatwasser.state %}
          on
         {% elif 'on' in states.switch.stp_keuken_commander.state %}
          on
         {% else %}
          off
         {% endif %}
      icon_template: >-
        {% if 'on' in states.switch.stp_keuken_vaatwasser.state %}
           mdi:dishwasher
        {% elif 'on' in states.switch.stp_keuken_commander.state %}
          mdi:food
        {% else %}
          mdi:close-circle-outline
        {% endif %}



- platform: template
  sensors:
    stopwatch_dish:
      friendly_name: "Stopwatch Dishwasher"
      value_template: >
        {% if is_state('states.switch.stp_keuken_vaatwasser', 'on') %}
          {{ (now() - states.automation.start_dish.attributes.last_triggered).total_seconds() | int }}
        {% elif is_state('sensor.stopwatch_dish', 'unknown') %}
          0
        {% else %}
          {{ states('sensor.stopwatch_dish') }}
        {% endif %}
      unit_of_measurement: 'sec'
      entity_id:
        - switch.stp_keuken_vaatwasser
        - automation.start_dish
        - sensor.time

- platform: template
  sensors:
    timer_dryer:
      friendly_name: "Dryer timer"
      value_template: >
        {{(as_timestamp(now()) - as_timestamp(states.automation.start_dryer.attributes.last_triggered | default(0))) | timestamp_custom("%H")|int-1}} Hours {{(as_timestamp(now()) - as_timestamp(states.automation.scene_start_dryer.attributes.last_triggered | default(0))) | timestamp_custom("%M")|int}} Minutes ago


- platform: template
  sensors:
    timer_dish:
      friendly_name: "Dish timer"
      value_template: >
        {{(as_timestamp(now()) - as_timestamp(states.automation.scene_start_dish.attributes.last_triggered | default(0))) | timestamp_custom("%H")|int-1}} Hours {{(as_timestamp(now()) - as_timestamp(states.automation.scene_start_dish.attributes.last_triggered | default(0))) | timestamp_custom("%M")|int}} Minutes ago
